CREATE TABLE IF NOT EXISTS users
(
    id       INT PRIMARY KEY     NOT NULL AUTO_INCREMENT,
    password VARCHAR(128)        NOT NULL,
    name     VARCHAR(128)        NOT NULL,
    lastname VARCHAR(128)        NOT NULL,
    age      INT                 NOT NULL,
    email    VARCHAR(128) UNIQUE NOT NULL,
    UNIQUE INDEX id_UNIQUE (id ASC) VISIBLE
);

INSERT INTO users (password, name, lastname, age, email)
VALUES ('$2y$10$k9wpl1KXv4V2n9jIHLFYUuHqw3NzUAvdS4EAco7Do2LQnsfOJLaFK', 'Ivan', 'Ivanov', 30, '1');

INSERT INTO users (password, name, lastname, age, email)
VALUES ('$2y$10$NB7CzHMwOsdAOVR2ZbW6rODU4VtxZ3ftJyjp34sBo7.8ShjFQONOW', 'Petr', 'Petrov', 20, '1');

CREATE TABLE IF NOT EXISTS roles
(
    id   INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    role VARCHAR(32)     NOT NULL
);

CREATE TABLE IF NOT EXISTS users_roles
(
    user_id INT NOT NULL,
    role_id INT NOT NULL,
    PRIMARY KEY (user_id, role_id),
    FOREIGN KEY (user_id) REFERENCES users (id),
    FOREIGN KEY (role_id) REFERENCES roles (id)
);

INSERT INTO user_repository.roles (role)
VALUES ('ROLE_USER'),
       ('ROLE_ADMIN');

INSERT INTO user_repository.users_roles (user_id, role_id)
VALUES (1, 1);

INSERT INTO user_repository.users_roles (user_id, role_id)
VALUES (1, 2);

INSERT INTO user_repository.users_roles (user_id, role_id)
VALUES (2, 1);